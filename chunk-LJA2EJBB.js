import{b as i,i as a}from"./chunk-I67E4GUK.js";var s="app_users",o="current_user",n=class t{usersSubject;users$;currentUser;currentUser$;constructor(){let e=this.isBrowser()?this.loadUsersFromStorage():[];e.length===0&&(e.push({name:"Nikhil",email:"nikhil@gmail.com",password:"pass123",role:"Admin"}),this.isBrowser()&&localStorage.setItem(s,JSON.stringify(e)));let r=this.isBrowser()?this.loadCurrentUserFromStorage():null;this.usersSubject=new i(e),this.users$=this.usersSubject.asObservable(),this.currentUser=new i(r),this.currentUser$=this.currentUser.asObservable()}isBrowser(){return typeof window<"u"&&typeof localStorage<"u"}loadUsersFromStorage(){let e=localStorage.getItem(s);return e?JSON.parse(e):[]}loadCurrentUserFromStorage(){let e=localStorage.getItem(o);return e?JSON.parse(e):null}getUsers(){return this.usersSubject.value}addUser(e){let r=[...this.usersSubject.value,e];this.usersSubject.next(r),this.isBrowser()&&localStorage.setItem(s,JSON.stringify(r))}getCurrentUser(){return this.currentUser.value}setCurrentUser(e){this.currentUser.next(e),this.isBrowser()&&localStorage.setItem(o,JSON.stringify(e))}clearUsers(){this.usersSubject.next([]),this.isBrowser()&&localStorage.removeItem(s)}clearCurrentUser(){this.currentUser.next(null),this.isBrowser()&&localStorage.removeItem(o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};export{n as a};
