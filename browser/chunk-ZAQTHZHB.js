import{b as t,i as a}from"./chunk-32BR5JMG.js";var i="app_users",o="current_user",n=class s{usersSubject;users$;currentUser;currentUser$;constructor(){let e=this.isBrowser()?this.loadUsersFromStorage():[{name:"Nikhil",email:"nikhil@gmail.com",password:"pass123",role:"Admin"}],r=this.isBrowser()?this.loadCurrentUserFromStorage():null;this.usersSubject=new t(e),this.users$=this.usersSubject.asObservable(),this.currentUser=new t(r),this.currentUser$=this.currentUser.asObservable()}isBrowser(){return typeof window<"u"&&typeof localStorage<"u"}loadUsersFromStorage(){let e=localStorage.getItem(i);return e?JSON.parse(e):[]}loadCurrentUserFromStorage(){let e=localStorage.getItem(o);return e?JSON.parse(e):null}getUsers(){return this.usersSubject.value}addUser(e){let r=[...this.usersSubject.value,e];this.usersSubject.next(r),this.isBrowser()&&localStorage.setItem(i,JSON.stringify(r))}getCurrentUser(){return this.currentUser.value}setCurrentUser(e){this.currentUser.next(e),this.isBrowser()&&localStorage.setItem(o,JSON.stringify(e))}clearUsers(){this.usersSubject.next([]),this.isBrowser()&&localStorage.removeItem(i)}clearCurrentUser(){this.currentUser.next(null),this.isBrowser()&&localStorage.removeItem(o)}static \u0275fac=function(r){return new(r||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{n as a};
